name: Manual Build Android

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'Tag to publish the build (e.g., v2.0.1)'
        required: true
      godot_version:
        description: 'Godot version to be builded (e.g., 3.5)'
        required: true

jobs:
  android-template:
    name: Compiling Gradle (Android)
    runs-on: "ubuntu-latest"
    strategy:
      matrix:
        RELEASE_VERSIONS: ["standard", "mono"]

    steps:
    - uses: actions/checkout@v2
    
    - name: Build Android Action
      id: build-android
      uses: Poing-Studios/godot-android-action@master
      with:
        project_path: admob
        release_version: ${{matrix.RELEASE_VERSIONS}}
        gdap_file_path: admob/AdMob.gdap

    - name: Create Artifact output folder
      run: mkdir -p artifacts_output

    - uses: actions/download-artifact@v3
      with:
        name: ${{ steps.build-android.outputs.artifact_name }}
        path: artifacts_output

    - name: Display structure of downloaded files
      run: ls -R
